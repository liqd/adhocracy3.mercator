<div data-ng-if="hasResourceHeader">
    <div class="resource-navigation">
        <adh-resource-dropdown
            data-print="true">
        </adh-resource-dropdown>
    </div>
    <header class="resource-header" data-ng-class="{'m-image': data.picture}">
        <adh-background-image
            data-no-fallback="true"
            data-path="{{data.picture}}">
            <div class="resource-header-main-wrapper">
                <div class="resource-header-main">

                    <h1 class="resource-header-title">{{ data.title }}</h1>

                    <ul class="resource-header-meta">
                        <li>
                            {{ "TR__BY" | translate }} <adh-user-meta data-path="{{data.creator}}" data-ng-if="data.creator"></adh-user-meta>
                        </li>
                        <li>
                            {{ "TR__ON" | translate }} <adh-time data-datetime="data.creationDate" data-format="L"></adh-time>
                        </li>
                    </ul>
                    <ul class="resource-header-meta">
                        <li>
                            <i class="icon-pin-detail"></i> {{data.description}}
                        </li>
                    </ul>
                </div>
            </div>
        </adh-background-image>
    </header>
    <div class="action-bar">
        <adh-map-switch data-ng-if="processProperties.hasLocation" data-model="data.isShowMap"></adh-map-switch>
    </div>
</div>
<div class="action-bar" data-ng-if="!hasResourceHeader">
    <adh-print-action data-class="action-bar-item"></adh-print-action>
    <adh-map-switch data-ng-if="processProperties.hasLocation" data-model="data.isShowMap"></adh-map-switch>
</div>
<div>
    <div data-ng-switch="currentPhase.name">
        <div data-ng-switch-when="announce">
            {{ currentPhase.description }}
        </div>
        <div data-ng-switch-default="">
            <adh-listing
                data-content-type="{{contentType}}"
                data-custom="{
                    processProperties: processProperties
                }"
                data-empty-text="{{ 'TR__PROPOSAL_EMPTY_TEXT' | translate }}"
                data-facets="facets"
                data-ng-show="!data.isShowMap"
                data-no-create-form="true"
                data-path="{{path}}"
                data-sort="sort"
                data-sorts="sorts">
                <adh-idea-collection-proposal-list-item
                    data-path="{{element}}"
                    data-process-properties="custom.processProperties">
                </adh-idea-collection-proposal-list-item>
            </adh-listing>

            <div
                class="map-info-persistent"
                data-ng-if="processProperties.hasLocation && data.isShowMap"
                data-adh-html-translate="TR__MAP_INCOMPLETE"
                data-translate-templates="{
                    link: '&lt;a href=&quot;&quot; data-ng-click=&quot;showMap(false)&quot;&gt;{{ content }}&lt;/a&gt;'
            }"></div>
            <adh-wait condition="data.isShowMap">
                <adh-map-listing
                    data-ng-if="processProperties.hasLocation"
                    data-content-type="{{contentType}}"
                    data-custom="{
                        processProperties: processProperties
                    }"
                    data-empty-text="{{ 'TR__PROPOSAL_EMPTY_TEXT' | translate }}"
                    data-facets="facets"
                    data-ng-show="data.isShowMap"
                    data-no-create-form="true"
                    data-path="{{path}}"
                    data-polygon="polygon"
                    data-sort="sort"
                    data-sorts="sorts">
                    <adh-idea-collection-proposal-map-list-item
                        data-path="{{item}}"
                        data-process-properties="custom.processProperties">
                    </adh-idea-collection-proposal-map-list-item>
                </adh-map-listing>
            </adh-wait>
        </div>
    </div>
</div>
