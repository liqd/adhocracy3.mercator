<article class="idea-collection-proposal-detail">
    <header class="idea-collection-proposal-detail-header">

        <div class="proposal-detail-image-clip" data-ng-if="data.picture">
            <adh-show-image
                data-css-path="proposal-detail-image"
                data-no-fallback="true"
                data-path="{{data.picture}}"
            ></adh-show-image>
        </div>
        <span
            data-ng-repeat="assignment in data.assignments"
            class="badge"
            data-ng-class="{
                'm-is-realized': assignment.name === 'going_to_be_realized',
                'm-is-not-realized': assignment.name === 'not_realizeable',
                'm-on-test': assignment.name === 'on_test'
            }">{{ assignment.title | translate }}</span>

        <ul class="idea-collection-proposal-detail-meta">
            <li data-ng-if="processOptions.hasLocationText" class="idea-collection-proposal-detail-meta-item idea-collection-proposal-detail-meta-item-location">
                <i class="icon-pin-detail"></i> {{data.locationText}}
            </li>
            <li class="idea-collection-proposal-detail-meta-item idea-collection-proposal-detail-meta-item-comments">
                <a href="{{ path | adhParentPath | adhResourceUrl:'comments' }}" class="disguised-link">
                    <i class="icon-speechbubble"></i> {{ data.commentCount }} {{ "TR__COMMENTS" | translate }}
                </a>
            </li>
            <li data-ng-if="!processOptions.maxBudget"></li>
            <li class="idea-collection-proposal-detail-meta-item idea-collection-proposal-detail-meta-budget">
                <div data-ng-if="processOptions.maxBudget"><i class="idea-collection-proposal-detail-meta-item-icon icon-budget"></i> {{data.budget | numberOrDash}} &euro;</div>
            </li>
            <li class="idea-collection-proposal-detail-meta-item idea-collection-proposal-detail-meta-participation">
                <adh-rate data-refers-to="{{path}}"></adh-rate>
            </li>
        </ul>
        <h1 class="idea-collection-proposal-detail-header-title">{{ data.title }}</h1>
    </header>

    <section class="idea-collection-proposal-detail-body">
        <a href="{{ path | adhParentPath | adhResourceUrl:'comments' }}" class="disguised-link idea-collection-proposal-detail-body-comments">
            <i class="icon-speechbubble"></i> {{ data.commentCount }}
        </a>
        <p class="idea-collection-proposal-detail-detail">{{data.detail}}</p>

        <p class="idea-collection-proposal-detail-author">
            {{ "TR__BY" | translate }}
            <adh-user-meta data-path="{{data.creator}}" data-ng-if="data.creator"></adh-user-meta><br/>
            {{ "TR__ON" | translate }}
            <adh-time data-datetime="data.creationDate" data-format="L"></adh-time>
        </p>
    </section>

    <section class="idea-collection-proposal-badge-descriptions">
        <div
            data-ng-repeat="assignment in data.assignments"
            data-ng-if="assignment.description"
            class="badge-description"
            data-ng-class="{
                'm-is-realized': assignment.name === 'going_to_be_realized',
                'm-is-not-realized': assignment.name === 'not_realizeable',
                'm-on-test': assignment.name === 'on_test'
            }">
            <adh-parse-markdown data-parsetext="assignment.description"></adh-parse-markdown>
        </div>
    </section>

    <section data-ng-if="processOptions.hasLocation">
        <adh-map-detail data-ng-if="data.polygon && data.lng && data.lat" data-lng="data.lng" data-lat="data.lat" data-polygon="data.polygon" data-height="250"></adh-map-detail>
    </section>

</article>
